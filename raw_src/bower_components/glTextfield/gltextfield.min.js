/*! 
  glTextfield v(0.0.57) 
  (c) 2013-2015
  https://gluenetworks.kilnhg.com/Code/Web-Development
  Release Date: 2015-03-10 
*/

"use strict";

/**
 * @ngdoc overview
 * @name glTextfield
 */
angular.module("glTextfield", []), angular.module("glTextfield", []), angular.module("glTextfield").directive("glTextfield", [ "$compile", "$timeout", function(a, b) {
    return {
        restrict: "EA",
        replace: !0,
        scope: {
            settings: "=",
            api: "="
        },
        link: function(c, d) {
            var e, f, g, h, i = "gl-textfield-input", j = "gl-textfield-error", k = "gl-textfield-view-label", l = "gl-textfield-view-value", m = "gl-invalid", n = "gl-empty", o = "gl-caps-lock", p = "gl-mouse-over", q = "gl-number-up-arrow-pressed", r = "gl-number-down-arrow-pressed", s = "gl-number-mouseover-spinner";
            c.api = c.api || {}, c.api._data = {}, c.api._data.capsLocked = !1, c.api._data.numberMouseOverSpinner = !1, 
            // MAP SETTINGS
            c.api._data.value = angular.isUndefined(c.settings.value) ? void 0 : c.settings.value, 
            c.api._data.type = angular.isUndefined(c.settings.type) ? "text" : c.settings.type, 
            c.api._data.valid = angular.isUndefined(c.settings.valid) ? !0 : c.settings.valid, 
            c.api._data.name = angular.isUndefined(c.settings.name) ? void 0 : c.settings.name, 
            c.api._data.label = angular.isUndefined(c.settings.label) ? void 0 : c.settings.label, 
            c.api._data.disabled = angular.isUndefined(c.settings.disabled) ? !1 : c.settings.disabled, 
            c.api._data.placeholder = angular.isUndefined(c.settings.placeholder) ? void 0 : c.settings.placeholder, 
            c.api._data.error = angular.isUndefined(c.settings.error) ? void 0 : c.settings.error, 
            c.api._data.editable = angular.isUndefined(c.settings.editable) ? !0 : c.settings.editable, 
            c.api._data.onKeyDown = angular.isFunction(c.settings.onKeyDown) ? c.settings.onKeyDown : void 0, 
            c.api._data.onKeyPress = angular.isFunction(c.settings.onKeyPress) ? c.settings.onKeyPress : void 0, 
            c.api._data.onKeyUp = angular.isFunction(c.settings.onKeyUp) ? c.settings.onKeyUp : void 0, 
            c.api._data.onInput = angular.isFunction(c.settings.onInput) ? c.settings.onInput : void 0, 
            c.api._data.onFocus = angular.isFunction(c.settings.onFocus) ? c.settings.onFocus : void 0, 
            c.api._data.onBlur = angular.isFunction(c.settings.onBlur) ? c.settings.onBlur : void 0, 
            c.api._data.onMouseOver = angular.isFunction(c.settings.onMouseOver) ? c.settings.onMouseOver : void 0, 
            c.api._data.onMouseOut = angular.isFunction(c.settings.onMouseOut) ? c.settings.onMouseOut : void 0, 
            c.api._data.onMouseMove = angular.isFunction(c.settings.onMouseMove) ? c.settings.onMouseMove : void 0, 
            c.api._data.onMouseDown = angular.isFunction(c.settings.onMouseDown) ? c.settings.onMouseDown : void 0, 
            c.api._data.onMouseUp = angular.isFunction(c.settings.onMouseUp) ? c.settings.onMouseUp : void 0, 
            // NUMBER settings
            c.api._data.numberSpinner = angular.isUndefined(c.settings.numberSpinner) ? !0 : c.settings.numberSpinner;
            // Templates
            var t = '<input name="' + c.api._data.name + '" type="' + c.api._data.type + '" class="' + i + '" placeholder="{{api._data.placeholder}}" data-ng-model="api._data.value" data-ng-value="api._data.value">', u = '<p class="' + j + '">{{api._data.error}}</p>', v = '<label class="' + k + '">{{api._data.label}}</label>', w = '<p class="' + l + '">{{api._data.value}}</p>', x = function() {
                var a = !1;
                switch (c.api._data.type) {
                  case "text":
                  case "email":
                  case "url":
                  case "tel":
                  case "number":
                  case "search":
                    a = !0;
                }
                return a;
            };
            c.api.setInvalid = function(a) {
                c.api._data.valid = !1, c.api._data.error = angular.isString(a) ? a : void 0, C();
            }, c.api.setValid = function() {
                c.api._data.valid = !0, C();
            }, c.api.setValue = function(a) {
                c.api._data.value = a;
            }, c.api.getValue = function() {
                return c.api._data.value;
            }, c.api.setPlaceholder = function(a) {
                c.api._data.placeholder = a;
            }, c.api.getPlaceholder = function() {
                return c.api._data.placeholder;
            }, c.api.disable = function() {
                c.api._data.disabled = !0, e.attr("disabled", !0);
            }, c.api.enable = function() {
                c.api._data.disabled = !1, e.removeAttr("disabled");
            }, c.api.getInputElement = function() {
                return e;
            };
            var y = function() {
                // event bindings
                // filter out letters for number types
                /////////////////////////////////////////////////////////
                // CAPS LOCK
                // END CAPS LOCK
                /////////////////////////////////////////////////////////
                /////////////////////////////////////////////////////////
                // NUMBER SPINNER logic
                // End NUMBER SPINNER logic
                /////////////////////////////////////////////////////////
                // emit events
                return e = angular.element(t), e.val(c.api._data.value), c.api._data.disabled && e.attr("disabled", !0), 
                angular.isString(c.api._data.value) && "" != c.api._data.value ? e.removeClass(n) : e.addClass(n), 
                angular.isUndefined(c.api._data.onKeyDown) || e.bind("keydown", function(a) {
                    c.api._data.onKeyDown(a);
                }), angular.isUndefined(c.api._data.onKeyUp) || e.bind("keyup", function(a) {
                    c.api._data.onKeyUp(a);
                }), angular.isUndefined(c.api._data.onKeyPress) || e.bind("keypress", function(a) {
                    c.api._data.onKeyPress(a);
                }), angular.isUndefined(c.api._data.onInput) || e.bind("input", function(a) {
                    c.api._data.onInput(a);
                }), angular.isUndefined(c.api._data.onMouseOver) || e.bind("mouseover", function(a) {
                    c.api._data.onMouseOver(a);
                }), angular.isUndefined(c.api._data.onMouseOut) || e.bind("mouseout", function(a) {
                    c.api._data.onMouseOut(a);
                }), angular.isUndefined(c.api._data.onMouseMove) || e.bind("mousemove", function(a) {
                    c.api._data.onMouseMove(a);
                }), angular.isUndefined(c.api._data.onMouseDown) || e.bind("mousedown", function(a) {
                    c.api._data.onMouseDown(a);
                }), angular.isUndefined(c.api._data.onMouseUp) || e.bind("mouseup", function(a) {
                    c.api._data.onMouseUp(a);
                }), "number" == c.api._data.type && e.bind("keydown", function(a) {
                    a.keyCode > 64 && a.keyCode < 96 && a.preventDefault();
                }), e.bind("keypress", function(a) {
                    var b = a.charCode || a.keyCode, d = a.shiftKey;
                    b > 96 && 123 > b && d ? (e.removeClass(o), c.api._data.capsLocked = !1) : b > 64 && 91 > b && !d && (e.addClass(o), 
                    c.api._data.capsLocked = !0);
                }), e.bind("keyup keydown", function(a) {
                    {
                        var b = a.charCode || a.keyCode;
                        a.shiftKey;
                    }
                    20 == b && 1 == c.api._data.capsLocked && (e.removeClass(o), c.api._data.capsLocked = !1);
                }), "number" == c.api._data.type && c.api._data.numberSpinner && (e.bind("mouseover", function() {
                    e.addClass(p), // necessary for cursor styling over spinner
                    e.bind("mousemove", function(a) {
                        var b = e[0].getBoundingClientRect(), c = a.offsetX || a.clientX - $(a.target).offset().left, d = a.offsetY || a.clientY - $(a.target).offset().top;
                        c > b.width - 20 ? d < b.height / 2 ? e.addClass(s) : d > b.height / 2 && e.addClass(s) : e.removeClass(s);
                    });
                }), e.bind("mouseout", function() {
                    e.removeClass(p), e.removeClass(s), e.off("mousemove");
                }), e.bind("mousedown", function(a) {
                    var b = e[0].getBoundingClientRect(), c = a.offsetX || a.clientX - $(a.target).offset().left, d = a.offsetY || a.clientY - $(a.target).offset().top;
                    c > b.width - 20 && (d < b.height / 2 ? (e.addClass(q), D()) : d > b.height / 2 && (e.addClass(r), 
                    E()));
                }), e.bind("mouseup", function() {
                    e.removeClass(q), e.removeClass(r);
                })), angular.forEach(c.api._data.emitEvents, function(a) {
                    e.bind(a, function(d) {
                        // sorry for the long wait, but we must let the model and value update each other before emitting.
                        b(function() {
                            c.$emit(c.settings.name + "-" + a, d);
                        }, 0);
                    });
                }), a(e)(c);
            };
            c.$watch("api._data.value", function() {
                B();
            }), // IF CAN VIEW MODE
            x() && (c.api.setLabel = function(a) {
                c.api._data.label = a;
            }, c.api.getLabel = function() {
                return c.api._data.label;
            }, c.api.view = function() {
                z();
            }, c.api.edit = function() {
                A();
            });
            var z = function() {
                c.api._data.editable = !1, d.children().remove(), angular.isString(c.api._data.label) && (g = a(angular.element(v))(c), 
                d.append(g)), h = a(angular.element(w))(c), d.append(h);
            }, A = function() {
                c.api._data.editable = !0, d.children().remove(), d.append(y()), C(), B();
            }, B = function() {
                angular.isUndefined(e) || ("number" == c.api._data.type ? angular.isNumber(c.api._data.value) && null != c.api._data.value ? e.removeClass(n) : e.addClass(n) : angular.isString(c.api._data.value) && c.api._data.value.length > 0 ? e.removeClass(n) : e.addClass(n));
            }, C = function() {
                angular.isUndefined(f) || f.remove(), c.api._data.editable && (c.api._data.valid ? e.removeClass(m) : (e.addClass(m), 
                angular.isString(c.api._data.error) && (f = a(angular.element(u))(c), d.append(f))));
            }, D = function() {
                var a = c.api.getValue();
                a++, isNaN(a) && (a = 0), c.api.setValue(a), e.val(a);
            }, E = function() {
                var a = c.api.getValue();
                a--, isNaN(a) && (a = 0), c.api.setValue(a), e.val(a);
            };
            // INIT
            x() && !angular.isUndefined(c.settings.view) && 1 == c.settings.view ? z() : A();
        }
    };
} ]);
//# sourceMappingURL=gltextfield.min.js.map